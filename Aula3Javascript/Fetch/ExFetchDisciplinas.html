<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExFetchDisciplinas</title>
    <style>
        .divCard {
            border: 1px solid green;
            height: 100px;
            width: 200px;
            background-color: gold;
            margin: 10px;
        }
    </style>
</head>
<body>
    <h3>Listagem de disciplinas do IFCE</h3>
    <button onclick="listar()">Listar</button>
    <button onclick="inserir()">Inserir</button>
    <div id="divResultado"></div>
    <script>
        async function listar() {
            let url = 'https://aula-backend-developer-fc7o.vercel.app/disciplina/todas'
            let resultado = await fetch(url)
            let resFormatado = await resultado.json()
            resFormatado.forEach( function (elemento) {
                let novoDivCard = document.createElement('div')
                novoDivCard.className = 'divCard'
                novoDivCard.innerHTML = elemento.nome
                document.getElementById('divResultado').append(novoDivCard)
            })
        }

        async function inserir() {
            let url = 'https://aula-backend-developer-fc7o.vercel.app/disciplina'
            let resultado = await fetch(url, {
                method: 'POST',
                body: JSON.stringify({'nome': 'LabNovo8', 'capacidade': 20, 'descricao': 'Descricao8'}),
                headers: {'Content-type': 'application/json;charset=UTF-8'}
            })
            let resultadoFormatado = await resultado.json()
            document.getElementById('divResultado').textContent = resultadoFormatado.mensagem
        }
    </script>
</body>
</html>
